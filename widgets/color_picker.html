<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hover Color Picker</title>
<style>
  body {
    font-family: 'Google Sans', Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    margin: 0;
    background-color: #f5f5f5;
  }

  h1 {
    font-weight: 400;
    color: #202124;
    margin-bottom: 20px;
  }

  .picker-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: #fff;
    padding: 20px;
    border-radius: 16px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  canvas {
    cursor: crosshair;
    border-radius: 50%;
    margin-bottom: 15px;
  }

  #brightness {
    width: 200px;
    margin-bottom: 10px;
  }

  #selected-color {
    width: 80px;
    height: 80px;
    border-radius: 12px;
    border: 2px solid #dadce0;
    margin-top: 10px;
  }

  #hex-input {
    margin-top: 8px;
    padding: 5px 8px;
    border-radius: 6px;
    border: 1px solid #dadce0;
    font-size: 14px;
    text-align: center;
    width: 90px;
  }
</style>
</head>
<body>

<h1>Color Picker</h1>

<div class="picker-container">
  <canvas id="color-wheel" width="200" height="200"></canvas>
  <input type="range" id="brightness" min="0" max="100" value="100">
  <div id="selected-color"></div>
  <input type="text" id="hex-input" value="#ff0000">
</div>

<script>
const canvas = document.getElementById('color-wheel');
const ctx = canvas.getContext('2d');
const width = canvas.width;
const height = canvas.height;
const radius = width/2;
const selectedColorDiv = document.getElementById('selected-color');
const hexInput = document.getElementById('hex-input');
const brightnessSlider = document.getElementById('brightness');

function drawColorWheel() {
  const image = ctx.createImageData(width, height);
  const data = image.data;
  for (let y = 0; y < height; y++) {
    for (let x = 0; x < width; x++) {
      const dx = x - radius;
      const dy = y - radius;
      const distance = Math.sqrt(dx*dx + dy*dy);
      if(distance <= radius) {
        let angle = Math.atan2(dy, dx);
        if(angle < 0) angle += 2*Math.PI;
        const hue = angle / (2*Math.PI) * 360;
        const saturation = distance / radius;
        const value = brightnessSlider.value / 100;
        const rgb = hsvToRgb(hue, saturation, value);
        const index = (y*width + x)*4;
        data[index] = rgb.r;
        data[index+1] = rgb.g;
        data[index+2] = rgb.b;
        data[index+3] = 255;
      }
    }
  }
  ctx.putImageData(image, 0, 0);
}

function hsvToRgb(h,s,v){
  let c=v*s;
  let x=c*(1-Math.abs((h/60)%2-1));
  let m=v-c;
  let r=0,g=0,b=0;
  if(h<60){r=c; g=x; b=0;}
  else if(h<120){r=x; g=c; b=0;}
  else if(h<180){r=0; g=c; b=x;}
  else if(h<240){r=0; g=x; b=c;}
  else if(h<300){r=x; g=0; b=c;}
  else {r=c; g=0; b=x;}
  return {r:Math.round((r+m)*255), g:Math.round((g+m)*255), b:Math.round((b+m)*255)};
}

function rgbToHex(r,g,b){
  return "#" + [r,g,b].map(x => x.toString(16).padStart(2,'0')).join('');
}

function pickColor(x,y){
  const dx = x - radius;
  const dy = y - radius;
  const distance = Math.sqrt(dx*dx + dy*dy);
  if(distance>radius) return;
  let angle = Math.atan2(dy, dx);
  if(angle<0) angle += 2*Math.PI;
  const hue = angle / (2*Math.PI) * 360;
  const saturation = distance / radius;
  const value = brightnessSlider.value/100;
  const rgb = hsvToRgb(hue,saturation,value);
  selectedColorDiv.style.backgroundColor = rgbToHex(rgb.r,rgb.g,rgb.b);
  hexInput.value = rgbToHex(rgb.r,rgb.g,rgb.b);
}

canvas.addEventListener('mousemove', e=>{
  pickColor(e.offsetX,e.offsetY);
});

brightnessSlider.addEventListener('input', drawColorWheel);

hexInput.addEventListener('input', () => {
  selectedColorDiv.style.backgroundColor = hexInput.value;
});

drawColorWheel();
</script>

</body>
</html>
